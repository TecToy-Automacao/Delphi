/******************************************************************************/
/***          Generated by IBExpert 2011.12.11 21/02/2022 00:27:17          ***/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

SET CLIENTLIB 'C:\fbclient.dll';

CONNECT 'D:\1. Exemplos Cursos\Comanda Eletronica - 2.0\Database\COMANDA20.FDB' USER 'SYSDBA' PASSWORD 'masterkey';



/******************************************************************************/
/***                               Generators                               ***/
/******************************************************************************/

CREATE GENERATOR GEN_CORES_ID;
SET GENERATOR GEN_CORES_ID TO 0;

CREATE GENERATOR GEN_ITEM_PEDIDO_ID;
SET GENERATOR GEN_ITEM_PEDIDO_ID TO 155;

CREATE GENERATOR GEN_PEDIDO_ID;
SET GENERATOR GEN_PEDIDO_ID TO 153;

CREATE GENERATOR GEN_PRODUTO_ID;
SET GENERATOR GEN_PRODUTO_ID TO 10;

CREATE GENERATOR GEN_USUARIOS_ID;
SET GENERATOR GEN_USUARIOS_ID TO 1;



/******************************************************************************/
/***                                 Tables                                 ***/
/******************************************************************************/



CREATE TABLE COMANDA (
    ID        NUMERIC(9,0) NOT NULL,
    NUMERO    NUMERIC(9,0) NOT NULL,
    CODBARRA  VARCHAR(100),
    QRCODE    VARCHAR(100)
);

CREATE TABLE CORES (
    ID_COR               INTEGER NOT NULL,
    ID_PERFIL            INTEGER,
    NOME_PERFIL          VARCHAR(20),
    COR_OCUPADA          VARCHAR(30) NOT NULL,
    COR_LABEL_OCUPADA    VARCHAR(30) NOT NULL,
    COR_LIVRE            VARCHAR(30) NOT NULL,
    COR_LABEL_LIVRE      VARCHAR(30) NOT NULL,
    COR_PRINCIPAL        VARCHAR(30) NOT NULL,
    COR_SECUNDARIA       VARCHAR(30) NOT NULL,
    COR_TERCIARIA        VARCHAR(30) NOT NULL,
    COR_FONTE_ESMAECIDA  VARCHAR(30) NOT NULL,
    COR_FONTE_ATIVA      VARCHAR(30) NOT NULL
);

CREATE TABLE GARCOM (
    ID    INTEGER NOT NULL,
    NOME  VARCHAR(50)
);

CREATE TABLE ITEM_PEDIDO (
    ID          INTEGER NOT NULL,
    ID_PEDIDO   INTEGER NOT NULL,
    QTDE        INTEGER,
    ID_PRODUTO  INTEGER,
    OBS         VARCHAR(100),
    STATUS      VARCHAR(1) DEFAULT 'A',
    ID_COMANDA  INTEGER
);

CREATE TABLE MESA (
    ID            INTEGER NOT NULL,
    NUM_MESA      INTEGER,
    OCUPADA       INTEGER,
    ATIVOINATIVO  VARCHAR(1) NOT NULL
);

CREATE TABLE PEDIDO (
    ID            INTEGER NOT NULL,
    NOME_CLIENTE  VARCHAR(50),
    VALOR_TOTAL   DOUBLE PRECISION,
    STATUS        VARCHAR(1) DEFAULT 'A',
    ID_GARCOM     INTEGER,
    ID_MESA       INTEGER
);

CREATE TABLE PRODUTO (
    ID            INTEGER NOT NULL,
    NOME          VARCHAR(30),
    DESCRICAO     VARCHAR(100),
    VLR_UNITARIO  DOUBLE PRECISION,
    CODBAR        VARCHAR(30)
);

CREATE TABLE TIPOUSUARIO (
    ID    INTEGER NOT NULL,
    NOME  VARCHAR(20)
);

CREATE TABLE USUARIOS (
    ID           INTEGER NOT NULL,
    USUARIO      VARCHAR(50),
    SENHA        VARCHAR(20),
    TIPOUSUARIO  INTEGER NOT NULL
);

INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (1, 1, '1', '1');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (2, 2, '2', '2');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (3, 3, '3', '3');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (4, 4, '4', '4');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (5, 5, '5', '5');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (6, 6, '6', '6');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (7, 7, '7', '7');
INSERT INTO COMANDA (ID, NUMERO, CODBARRA, QRCODE) VALUES (8, 8, '8', '8');

COMMIT WORK;

INSERT INTO CORES (ID_COR, ID_PERFIL, NOME_PERFIL, COR_OCUPADA, COR_LABEL_OCUPADA, COR_LIVRE, COR_LABEL_LIVRE, COR_PRINCIPAL, COR_SECUNDARIA, COR_TERCIARIA, COR_FONTE_ESMAECIDA, COR_FONTE_ATIVA) VALUES (1, 1, 'DEMO - AZUL', '$FF3661E9', 'White', 'White', 'Black', '$FF3661E9', '$FFA68477', 'White', '$FF733B27', 'White');
INSERT INTO CORES (ID_COR, ID_PERFIL, NOME_PERFIL, COR_OCUPADA, COR_LABEL_OCUPADA, COR_LIVRE, COR_LABEL_LIVRE, COR_PRINCIPAL, COR_SECUNDARIA, COR_TERCIARIA, COR_FONTE_ESMAECIDA, COR_FONTE_ATIVA) VALUES (2, 2, 'DEMO - LARANJA', '$FFEE6F42', '$FFD9D0C7', '$FFD9D0C7', '$FFEE6F42', '$FF733B27', '$FFA68477', 'White', 'White', 'White');
INSERT INTO CORES (ID_COR, ID_PERFIL, NOME_PERFIL, COR_OCUPADA, COR_LABEL_OCUPADA, COR_LIVRE, COR_LABEL_LIVRE, COR_PRINCIPAL, COR_SECUNDARIA, COR_TERCIARIA, COR_FONTE_ESMAECIDA, COR_FONTE_ATIVA) VALUES (3, 3, 'DEMO - VERDE', 'Tomato', 'White', 'Chartreuse', 'White', 'Peru', 'Seashell', 'Seashell', '$FF733827', 'White');
INSERT INTO CORES (ID_COR, ID_PERFIL, NOME_PERFIL, COR_OCUPADA, COR_LABEL_OCUPADA, COR_LIVRE, COR_LABEL_LIVRE, COR_PRINCIPAL, COR_SECUNDARIA, COR_TERCIARIA, COR_FONTE_ESMAECIDA, COR_FONTE_ATIVA) VALUES (4, 4, 'DEMO - BLACK', 'Firebrick', 'White', 'White', 'Black', '#FF454545', '#FF454545', '#FF454545', 'White', 'White');

COMMIT WORK;

INSERT INTO GARCOM (ID, NOME) VALUES (1, 'PEDRO');
INSERT INTO GARCOM (ID, NOME) VALUES (2, 'MARIA');
INSERT INTO GARCOM (ID, NOME) VALUES (3, 'FERNANDA');
INSERT INTO GARCOM (ID, NOME) VALUES (4, 'MARIO');

COMMIT WORK;

INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (131, 136, 1, 1, '- Picles', 'A', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (133, 136, 1, 5, NULL, 'A', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (142, 141, 1, 1, NULL, 'E', 2);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (143, 138, 1, 2, NULL, 'C', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (132, 142, 1, 1, NULL, 'A', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (144, 151, 1, 2, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (145, 151, 1, 3, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (134, 145, 1, 1, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (135, 145, 2, 5, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (136, 140, 1, 2, NULL, 'A', 3);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (147, 151, 2, 5, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (53, 53, 1, 2, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (63, 53, 1, 6, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (149, 152, 1, 2, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (150, 152, 1, 3, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (151, 152, 1, 4, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (130, 140, 1, 6, '+ Molho Barbecue', 'C', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (137, 139, 1, 4, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (138, 139, 1, 2, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (153, 153, 1, 5, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (154, 153, 1, 3, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (155, 153, 1, 1, NULL, 'P', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (139, 146, 1, 1, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (140, 141, 2, 6, 'Sem cebola', 'E', 1);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (141, 141, 1, 1, NULL, 'E', 1);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (120, 135, 1, 1, 'Sem cebla', 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (121, 135, 1, 4, 'Laranja', 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (122, 136, 2, 4, NULL, 'P', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (124, 137, 1, 4, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (125, 138, 1, 4, NULL, 'C', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (126, 139, 2, 5, NULL, 'E', 0);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (128, 141, 1, 4, NULL, 'E', 1);
INSERT INTO ITEM_PEDIDO (ID, ID_PEDIDO, QTDE, ID_PRODUTO, OBS, STATUS, ID_COMANDA) VALUES (129, 141, 2, 1, NULL, 'E', 1);

COMMIT WORK;

INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (1, 1, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (2, 2, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (3, 3, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (4, 4, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (5, 5, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (6, 6, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (7, 7, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (8, 8, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (9, 9, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (10, 10, 1, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (11, 11, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (12, 12, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (13, 13, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (14, 14, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (15, 15, 0, 'A');
INSERT INTO MESA (ID, NUM_MESA, OCUPADA, ATIVOINATIVO) VALUES (16, 16, 0, 'I');

COMMIT WORK;

INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (148, 'JESUS', 27.45, 'E', 1, 1);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (145, 'TERESA MUNHOZ', 42.55, 'E', 1, 6);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (149, 'MUNHOZ', 0, 'A', 1, 7);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (150, 'NOVO PEDIDO 3', 0, 'A', 1, 9);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (151, 'TESTE', 53.57, 'E', 1, 5);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (53, 'ADRIANO', 82.51, 'E', 1, 0);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (152, 'HELENA', 47.12, 'E', 1, 8);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (153, 'ADRIANO', 40.95, 'A', 1, 10);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (146, 'NOVO PEDIDO', 27.45, 'E', 1, 2);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (135, 'SULA', 36.1, 'E', 1, 1);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (136, 'PEDRO', 52.3, 'F', 1, 0);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (137, 'JOSE', 8.65, 'E', 1, 3);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (138, 'MANOELA', 41.17, 'C', 2, 4);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (139, 'JUREMA', 56.27, 'E', 1, 2);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (140, 'TERESA', 82.51, 'A', 1, 1);
INSERT INTO PEDIDO (ID, NOME_CLIENTE, VALOR_TOTAL, STATUS, ID_GARCOM, ID_MESA) VALUES (141, 'CRISTIAN', 218.43, 'A', 1, 1);

COMMIT WORK;

INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (1, 'Pizza 3 Queijos', 'Pizza 3 Queijos - Catupity, Parmesão e Mussarela', 27.45, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (2, 'Pizza 4 Queijos', 'Pizza 4 Queijos - Catupity, Parmesão, Mussarela e Provolone', 32.52, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (3, 'Refrirerante', 'Todos', 5.95, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (4, 'Suco', 'Frutas Natural', 8.65, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (5, 'Cerveja', 'Longneck', 7.55, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (9, 'Sorvete Baunilha', 'Sorverte Baunilha', 8.75, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (10, 'Gelia de Mocotó Embasa - Padra', 'Gelia de Mocotó Embasa - Padrao', 1.65, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (6, 'Buffet', 'Buffet', 49.99, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (7, 'Sobremesa Sorvete Calda', 'Sobremesa Sorvete Calda', 6.85, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (8, 'Sobremesa Pudim', 'Sobremesa Pudim', 7.95, '');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (11, 'Prestigio', 'Prestigio', 1.5, '7891164016388');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (12, 'Chokito', 'Chokito', 2.5, '7897053000223');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (13, 'Sorvete Kbon', 'Sorvete Kigon', 7.8, '7896481904028');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (14, 'Isqueiro', 'Isqueito', 4.85, '7898938706834');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (15, 'Chiclete', 'Chiclete', 2.45, '7893000090019');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (16, 'Doritos', 'Doritos', 9.5, '7898017335634');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (17, 'Fandangos', 'Fandangos', 10.84, '789300030213');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (18, 'Pao de Forma Panco', 'Pao de Forma Panco', 7.89, '7898096140136');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (19, 'Bolo Pulman', 'Bolo Pulman', 9.6, '7891164022037');
INSERT INTO PRODUTO (ID, NOME, DESCRICAO, VLR_UNITARIO, CODBAR) VALUES (20, 'Refrigerante Lata', 'Refrigerante Lata', 4.9, '7891164016388');

COMMIT WORK;

INSERT INTO TIPOUSUARIO (ID, NOME) VALUES (1, 'CAIXA');
INSERT INTO TIPOUSUARIO (ID, NOME) VALUES (2, 'ATENDENTE');
INSERT INTO TIPOUSUARIO (ID, NOME) VALUES (3, 'GERENTE');
INSERT INTO TIPOUSUARIO (ID, NOME) VALUES (4, 'COPA');

COMMIT WORK;

INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (1, 'PEDRO', '1', 2);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (2, 'ADRIANO', '1', 1);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (3, 'JOSE', '1', 2);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (4, 'MARIA', '1', 2);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (5, 'MARLENE', '1', 4);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (6, 'VAGNER', '1', 3);
INSERT INTO USUARIOS (ID, USUARIO, SENHA, TIPOUSUARIO) VALUES (1, 'PEDRO PAULO 2', '1', 2);

COMMIT WORK;



/******************************************************************************/
/***                              Primary Keys                              ***/
/******************************************************************************/

ALTER TABLE GARCOM ADD CONSTRAINT PK_GARCOM PRIMARY KEY (ID);
ALTER TABLE ITEM_PEDIDO ADD CONSTRAINT PK_ITEM_PEDIDO PRIMARY KEY (ID);
ALTER TABLE MESA ADD CONSTRAINT PK_MESA PRIMARY KEY (ID);
ALTER TABLE PEDIDO ADD CONSTRAINT PK_PEDIDO PRIMARY KEY (ID);
ALTER TABLE PRODUTO ADD CONSTRAINT PK_PRODUTO PRIMARY KEY (ID);


/******************************************************************************/
/***                                Indices                                 ***/
/******************************************************************************/

CREATE INDEX MESA_IDX ON MESA (ID);


/******************************************************************************/
/***                                Triggers                                ***/
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/***                          Triggers for tables                           ***/
/******************************************************************************/



/* Trigger: CORES_BI */
CREATE TRIGGER CORES_BI FOR CORES
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if ((new.id_cor is null) or (new.id_cor < 0))   then
    new.id_cor = gen_id(gen_cores_id,1);
end
^

/* Trigger: ITEM_PEDIDO_BI */
CREATE TRIGGER ITEM_PEDIDO_BI FOR ITEM_PEDIDO
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if ((new.id is null) or (new.id < 0)) then
    new.id = gen_id(gen_item_pedido_id,1);
end
^

/* Trigger: PEDIDO_BI */
CREATE TRIGGER PEDIDO_BI FOR PEDIDO
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if ((new.id is null) OR (new.id < 0))  then
    new.id = gen_id(gen_pedido_id,1);
end
^

/* Trigger: PRODUTO_BI */
CREATE TRIGGER PRODUTO_BI FOR PRODUTO
ACTIVE BEFORE INSERT POSITION 0
as
begin
  IF ((NEW.ID IS NULL) OR (NEW.ID < 0)) THEN
    new.id = gen_id(gen_produto_id,1);
end
^

/* Trigger: USUARIOS_BI */
CREATE TRIGGER USUARIOS_BI FOR USUARIOS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  IF ((NEW.ID IS NULL) OR (NEW.ID < 0)) THEN
    NEW.ID = GEN_ID(GEN_USUARIOS_ID,1);
END
^

/* Trigger: "_TG_UPDATE_PEDIDO" */
CREATE TRIGGER "_TG_UPDATE_PEDIDO" FOR ITEM_PEDIDO
ACTIVE AFTER INSERT OR UPDATE OR DELETE POSITION 0
AS
begin
  UPDATE PEDIDO SET 
    VALOR_TOTAL = COALESCE(
      (
        SELECT
          SUM(IT.QTDE * PD.VLR_UNITARIO)
        FROM
          ITEM_PEDIDO IT
          INNER JOIN PRODUTO PD
          ON IT.ID_PRODUTO = PD.ID
        WHERE
          IT.ID_PEDIDO = COALESCE(NEW.ID_PEDIDO, OLD.ID_PEDIDO)
       ), 0)
    WHERE
      ID = COALESCE(NEW.ID_PEDIDO, OLD.ID_PEDIDO);
end
^

SET TERM ; ^

